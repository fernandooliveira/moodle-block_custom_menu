// This file is part of Moodle - http://moodle.org/
//
// Moodle is free software: you can redistribute it and/or modify
// it under the terms of the GNU General Public License as published by
// the Free Software Foundation, either version 3 of the License, or
// (at your option) any later version.
//
// Moodle is distributed in the hope that it will be useful,
// but WITHOUT ANY WARRANTY; without even the implied warranty of
// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
// GNU General Public License for more details.
//
// You should have received a copy of the GNU General Public License
// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
/**
 * @package    block_ned_custom_menu
 * @subpackage NED
 * @copyright  NED {@link http://ned.ca} 2017
 * @author     NED {@link http://ned.ca}
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 * @developer  G J Barnard - {@link http://about.me/gjbarnard} and
 *                           {@link http://moodle.org/user/profile.php?id=442195}
 * @originaldeveloper Michael Gardener <mgardener@cissq.com>
 */
/* jshint ignore:start */
define(["jquery","core/log"],function(a,b){"use strict";// jshint ;_;
return b.debug("Block NED Custom Menu jQuery AMD"),{init:function(){b.debug("Block NED Custom Menu AMD init initialised"),a(document).ready(function(){var c=M.util.image_url("open","block_ned_custom_menu");b.debug("Block NED Custom Menu AMD init open image url - "+c),a("#nedcmenu ul li.has-sub.current div a").each(function(b,d){if("no-highlight"==a(this).attr("title")){var e=a(this).parent().closest("li").attr("class").split(" ");a(this).css("color","#000"),a("."+e[0]+"."+e[1]).find("div").css({background:"none"}),a("."+e[0]+"."+e[1]).find(".optionbullet").css({background:"url("+c+") 0 5px no-repeat"}),a("."+e[0]+"."+e[1]).find(".optionbullet i").css({color:"#999"})}else a(this).parent().prev().css({color:"#fff"})}),a("#nedcmenu > ul > li.has-sub > div > div.optionbullet").click(function(){var b=a(this).parent().next();a(this).parent().find(".optionbullet").removeClass("acc-menu-closed").addClass("acc-menu-open"),a("#nedcmenu ul ul").each(function(b,c){a(this).is(":visible")&&!a(this).hasClass("active")&&(a(this).slideUp("normal"),a(this).parent().find(".optionbullet").removeClass("acc-menu-open").addClass("acc-menu-closed"))}),b.is("ul")&&!b.is(":visible")&&b.slideDown("normal")})})}}});